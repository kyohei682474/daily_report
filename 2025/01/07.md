# 2025/01/07の日報
## 取り組んだ課題一覧
* タイピング練習
*  RailsでECサイトを作る
## わかったこと
*  クレデンシャルは環境変数を入れるのではなく、直接パスワードを入力する
*  SQLはデータベースとの対話で用いられるプログラミング言語
  *  データベースとデータベースを繋ぐための言語
*  Includesとは２つのテーブルを結合してくれるメソッド。
  *  関連データを一度に取得することでallメソッドを使用するよりも無駄なクエリが作成されない。
  *  最小回数データベースを見に行く
*  N+１問題とはデータベースにデータを取得する際に無駄なSQLクエリが作成されてしまいパフォーマンスが悪くなってしまう。
  * 関連するデータを１つずつ取得して表示するという過程で全てのデータを取得することによってパフォーマンスの低下が起こる。allメソッドを使用して表示する。
  * これを解決するには1つずつ取得して表示するのではなく、関連データをまとめて取得する方法に切り替える。includeメソッド   
*  active_storage_blobsはアップロードに関するデータを保存する。
*  active_storage_attachmentsはアプリ内のさまざまなモデルの連付けを行う中間テーブルにあたるモデル。
  * アプリ内のさまざまなモデルと関連づけられるように関連づけるモデルのクラス名や連携するFKカラム名をFK値とともに保持する。
  * active_storage_blobsとは直接的にidのみで紐付けを行う。
  * has_one_attachedはレコードどファイル間に1対1のマッピングを設定する。
 * ポリモーフィック関連とは複数の親テーブルを参照する際に用いられるパターン
 * 子テーブルは親テーブルのidを外部キーとして持つことにより関連付けを行える。
 * 双方の関連付けを行わないと一方は関連を認知できるが、もう一方は認知できないなどの不都合は生じる
   * 親モデルにhas_one_attachedとしたら子モデルの方ではbelogs_toを使用して双方に関連付けを行わなければいけない。
   * active_storageは画像とモデルが双方に関連付けがされているので削除や生成が楽に行うことができる
* アクティブストレージにはwith_attached_attachment_nameというスコープが存在している。N+１問題を解決するためのメソッド。icludeメソッドに値するメソッド。
  * 関連するデータファイルを一括ロードを行い、データベースへの無駄なクエリ数を削減することができる。
  * 関連付けられたblobをinclude
  * 今回の場合だとitemテーブルに関連したアップロードされたメタデータをincludeするということ
* docker stopで実行中のコンテナも全て削除される。
*  docker system prune --volumes -aはdockerシステム上の不要なソースを一括できれいにしてくれるコマンド
  * docker system pruneはdockerシステム上の不要なソースを削除するコマンド
  * --volumeで未使用のボリュームも削除する
  * -aで全ての未使用のイメージを削除する。
* カートはユーザーの中間テーブルになる
  * ユーザーと商品を直接関連づけること自体無理な気がする。
  * １つのカートには１つの商品が存在する。
  * カートの役割は商品購入前の商品管理と商品注文までの橋渡し的な役割
* 注文確定ボタンをクリックするということはカートの中身(情報)を注文詳細に移動させる。                   
## 感じたこと
* ER図を意識しないとどんなモデルでどんなカラムを入れれば良いかわからなくなる。
## 合計時間 
Today: 5.0h<br>
Total: 1033.25h
