# 2025/06/17の日報
## 取り組んだ課題一覧
* タイピング練習
* Every day Rspecを読む
## わかったこと 
* take_screenメソッドはテスト内のあらゆる場所でスクリーンショットを行い、画像でデバッグを行うことができる。
  * javascriptドライバを使用している時のみ使用することができる。もしhtmlファイルを保存する場合はsave_pageメソッドやsave_and_open_pageメソッドを使用する。
*  リクエストスペックはシステムと外部のクライアントとの通信のテストを行うことルーティングや実際のレスポンスJSON構造を把握する。
  * コントローラスペックテストとは違いより実戦に近いレイヤーでテストを行なっている。
*  expect(json["description"]).to eq "Some explanation here"を追加する目的としてはAPIが返すJSONデータの内容と一致するかどうかを確認する
*  APIはステートレスなのでAPIで外部のクライアントと通信するには毎回emailとaccess_tokenが必要となる。
* postメソッドをテストする際には初めにプロジェクトの作成をして、それをアクセストークンとともにparamsに一緒に渡すことでpostメソッドが実行される。
* paramsに入れるためにわざと、createアクションを使用してprojectを作成しない。
  * project_attiribute = FactoryBot.attributes_for(:project)
  * このように記述することでparamsにハッシュ形式で挿入することができる。
  * また今回はpostメソッドによってprojectが作成されるかをテストしているにも関わらず、postされる前にDBにprojectオブジェクトが作成されるのでテスト内容が崩れてしまう。
* buildメソッドはオブジェクトを生成するがDBに保存されないので、手動でsaveメソッドを使用する必要がある。
* Wardenをテストモードにすることで模擬的にログインした状態にできる。
* base.after(:each) { Warden.test_reset! }はテスト終了後のクリーンアップするためのコードで、これがなければそのまま継続的に以前のログインが継承されてしまう。
* logoutはすでにインスタンは関連付けされているのであとはどのスコープをログアウトすればいいのかわかればいいのでシンボルを渡す必要がある。
* .to_symメソッドはシンボルに変換してくれるメソッド。
* .underscoreメソッドはキャメルケースをスネークケースに変換するメソッド。
* 一覧は配列で詳細はハッシュである理由としてはデータの数に応じて返す型が変わってくるから
  * 複数のデータを返すときはarrayを使用して1つのデータを返す場合はhashを返すことにrestなっている。
* 独自のサポートメソッドを使用する場合は明示的に次のステップを記述しないと進まない可能性が十分考えられる。
  * sign_inメソッドを使用する場合、普通に考えればsign inしたあとはrootページに遷移するが、sign_inしただけで止まってしまう。
* ログイン部分のコードは何度も記述する可能性があるのでmoduleに切り出して重複を避けることがDRY
* 画面遷移がうまくできないときは意識的にデバッグとしてsave_and_open_pageを使用して視覚的に何が起こっているかデバッグすることが重要。
* sign_in user; visit root_path あえて分けることで画面遷移を強く意識することができる。ワークフローの可視化に繋がるのでチーム開発に有効な方法。
  * コード内容が同じだとしても書き方を変えることでチームへ自分の意図を伝えることができる。
* DRYの原則に従う事によって何度も同じことを記述することを防げるのでメンテナンス性が向上する。またモジュールなどに定義することで汎用性や可読性も向上する。
* beforeブロックに記述した内容はdescribeやcontextブロックにある限り、必要がない時でも実行されてしまうので予期せぬ悪影響を与える可能性がある。また毎回実行されてしまうのでテスト遅延に繋がってしまう。
  * これを解決するのがlet
  * letは呼ばれた時に実行する遅延遅延読み込みを実行するメソッド。
  * let!にすることで遅延読み込みされないようにできる。
*  
           
## 感じたこと
* リファクタリングやモジュールを使用してコードをすっきりさせた時、本当にこのコードがわかりやすいかを自分で問うことが重要であると感じた
## 次やること
* Every day Rspecを読む
##  合計時間 
Today: 8.5h<br>
Total: 1490.05h
