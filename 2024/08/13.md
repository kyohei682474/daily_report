# 2024/08/13の日報
## 取り組んだ課題一覧
* タイピング練習
* SQL入門を読む
## わかったこと
* トランザクションはどんなことが起こっても一部だけが実行されることはあってはならない、途中で分割不可能なものとして取り扱う。
* トランザクションが実行中はテーブルデータが書き換えられると確定的に書き換えるのではなくて仮な状態として保管され、全てトランザクションが完了すると全てが確定することになる。これをコミットという。
* データの処理中に何か不具合が生じて中断する際に際にRBMSが仮書き換えを無かったことにすることをロールバックという。
* ダーティリードはまだコミットしていない処理中のデータを誰かに読めてしまうこと。
* 反復不能読み取りとはデータの処理中に結果が書き換えられてデータの整合性が崩れてしまうこと。
* ファントムリードとは2回のセレクトの間に他の人によってinsertが実行されると2回目のselectで結果行数が変化してしまうこと。1回目の行数に依存してしまう処理を行っている場合に問題となる。
* ダーティーリード、反復不能読み取り、ファントムリードなどの副作用を解決するのはトランザクション
  *  DBMSにはトランザクション中に他のトランザクションから影響を受けないように設計されている。
  *  1つのトランザクションが終わるまで他のトランザクションはロックされる。多くのトランザクションがあると動作が遅くなってしまう。
  *  トランザクションによって処理スピードが遅くならないようにトランザクション分離レベルを指定することができる。
* 普段ロックに関して意識することはないが、SQL文を使用して行ロックや表ロックを使用して指示を送ることができる。
* データを更新時に使用されるのが排他的ロック
* 共有ロックは他の共有ロックを許す特性があるのでデータの読み取りの際に多く利用される。
* 排他ロックを使用するにはselectの文末にfor updateを追加する。こうすることで該当行の書き換えはできなくなります。
* nowitオプションはDBMSのロック解除を待つことなくすぐにロック失敗のエラーを返し、トランザクションを終了させる。
 * 処理を待たせたくないアプリケーションに有効。
* ある特定の表全体をロックするにはlock table命令を使用する。
 *  LOCK TABLE テーブル名 IN モード名 MODE (NOWAIT)
* トランザクションのがたくさん実行されるとまれにデットロックというトランザクションの処理が途中で永久に止まってしまうことがある。
 * 多くのDBMSには自動で解決する仕組みが備わっている。定期的にテッドロックするものがないか確認してくれる。もし発見したら片方のロックを強制的に失敗させてテッドロックから抜け出せるようにしている。
 * テッドロックを予防するにはトランザクションの時間を短くする、同じ順番でロックするようにする。
 * テーブルを作成するにはcreate tableを使用する。
 * SQL命令分類として３つ存在する。DML、DDL、 DCL
   * DMLはinsert,select,update,deleteなど
   * DDLはデータを格納するテーブルなどの作成や削除、各種設定を行うための命令を行う言語(create table, alter table, drop table)
   * DCLはDMLやDDLの利用に関する禁止や許可を設定する命令(grant, revoke )
 * DCは誰にどんなデータ操作やテーブル操作を許すかと言った権限を設定するためのSQL命令の総称。
   * GRANT文は権限を付与し、REVOKEは権限を剥奪する。
   * GRANT　権限名 TO ユーザー名　(ユーザーへ権限名を付与する)
   * REVOKE 権限名 FROM　ユーザー名 (ユーザから権限名を剥奪する)               
## 感じたこと
* DBMSにはSQを打ち込んでいる裏側で多くの処理が行われていることがわかり、SQLを書くだけではプロになれないと感じた。
## 学習時間
Today: ３.0h<br>
Total: 721.0h
